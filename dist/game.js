(()=>{"use strict";var t={357:(t,e,r)=>{r.d(e,{Z:()=>h});var i=r(34),s=r(394);class h extends(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){get ELEMENTS(){return(0,s.Z)(!1),0}clone(){return(new this.constructor).copy(this)}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}fromArray(t,e=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=t[r+e];return this.check()}to(t){return t===this?this:(0,i.kJ)(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toArray(t=[],e=0){for(let r=0;r<this.ELEMENTS;++r)t[e+r]=this[r];return t}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(i.vc)}formatString(t){let e="";for(let r=0;r<this.ELEMENTS;++r)e+=(r>0?", ":"")+(0,i.Bw)(this[r],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!(0,i.fS)(this[e],t[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,e,r){void 0===r&&(r=e,e=t,t=this);for(let i=0;i<this.ELEMENTS;++i){const s=t[i];this[i]=s+r*(e[i]-s)}return this.check()}min(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}max(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}clamp(t,e){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],t[r]),e[r]);return this.check()}add(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]+=e[t];return this.check()}subtract(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]-=e[t];return this.check()}scale(t){if(Array.isArray(t))return this.multiply(t);for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}sub(t){return this.subtract(t)}setScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}addScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}divideScalar(t){return this.scale(1/t)}clampScalar(t,e){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],t),e);return this.check()}multiplyByScalar(t){return this.scale(t)}get elements(){return this}check(){if(i.vc.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}}},521:(t,e,r)=>{r.d(e,{Z:()=>n});var i=r(357),s=r(281),h=r(394);class n extends i.Z{get ELEMENTS(){return(0,h.Z)(!1),0}copy(t){return(0,h.Z)(!1),this}get x(){return this[0]}set x(t){this[0]=(0,s.u5)(t)}get y(){return this[1]}set y(t){this[1]=(0,s.u5)(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let e=0;for(let r=0;r<this.ELEMENTS;++r){const i=this[r]-t[r];e+=i*i}return(0,s.u5)(e)}dot(t){let e=0;for(let r=0;r<this.ELEMENTS;++r)e+=this[r]*t[r];return(0,s.u5)(e)}normalize(){const t=this.magnitude();if(0!==t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}multiply(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e[t];return this.check()}divide(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e[t];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return(0,h.Z)(t>=0&&t<this.ELEMENTS,"index is out of range"),(0,s.u5)(this[t])}setComponent(t,e){return(0,h.Z)(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}addVectors(t,e){return this.copy(t).add(e)}subVectors(t,e){return this.copy(t).subtract(e)}multiplyVectors(t,e){return this.copy(t).multiply(e)}addScaledVector(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}},855:(t,e,r)=>{r.r(e),r.d(e,{default:()=>c});var i=r(521),s=r(34),h=r(281),n=r(160),a=r(31);const o=[0,0,0],u={};class c extends i.Z{static get ZERO(){return u.ZERO=u.ZERO||Object.freeze(new c(0,0,0,0))}constructor(t=0,e=0,r=0){super(-0,-0,-0),1===arguments.length&&(0,s.kJ)(t)?this.copy(t):(s.vc.debug&&((0,h.u5)(t),(0,h.u5)(e),(0,h.u5)(r)),this[0]=t,this[1]=e,this[2]=r)}set(t,e,r){return this[0]=t,this[1]=e,this[2]=r,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return s.vc.debug&&((0,h.u5)(t.x),(0,h.u5)(t.y),(0,h.u5)(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=(0,h.u5)(t)}angle(t){return n.EU(this,t)}cross(t){return n.kC(this,this,t),this.check()}rotateX({radians:t,origin:e=o}){return n.lM(this,this,e,t),this.check()}rotateY({radians:t,origin:e=o}){return n.uD(this,this,e,t),this.check()}rotateZ({radians:t,origin:e=o}){return n.jI(this,this,e,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return n.fF(this,this,t),this.check()}transformAsVector(t){return(0,a.pL)(this,this,t),this.check()}transformByMatrix3(t){return n.kK(this,this,t),this.check()}transformByMatrix2(t){return(0,a.eQ)(this,this,t),this.check()}transformByQuaternion(t){return n.VC(this,this,t),this.check()}}},849:(t,e,r)=>{r.r(e),r.d(e,{default:()=>u});var i=r(521),s=r(34),h=r(281),n=r(160),a=r(31);const o={};class u extends i.Z{static get ZERO(){return o.ZERO=o.ZERO||Object.freeze(new u(0,0,0,0))}constructor(t=0,e=0,r=0,i=0){super(-0,-0,-0,-0),(0,s.kJ)(t)&&1===arguments.length?this.copy(t):(s.vc.debug&&((0,h.u5)(t),(0,h.u5)(e),(0,h.u5)(r),(0,h.u5)(i)),this[0]=t,this[1]=e,this[2]=r,this[3]=i)}set(t,e,r,i){return this[0]=t,this[1]=e,this[2]=r,this[3]=i,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}fromObject(t){return s.vc.debug&&((0,h.u5)(t.x),(0,h.u5)(t.y),(0,h.u5)(t.z),(0,h.u5)(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}get ELEMENTS(){return 4}get z(){return this[2]}set z(t){this[2]=(0,h.u5)(t)}get w(){return this[3]}set w(t){this[3]=(0,h.u5)(t)}transform(t){return n.fF(this,this,t),this.check()}transformByMatrix3(t){return(0,a._x)(this,this,t),this.check()}transformByMatrix2(t){return(0,a.G7)(this,this,t),this.check()}transformByQuaternion(t){return n.VC(this,this,t),this.check()}applyMatrix4(t){return t.transform(this,this),this}}},338:(t,e,r)=>{r.r(e),r.d(e,{Euler:()=>K,Matrix3:()=>b,Matrix4:()=>_,Pose:()=>G,Quaternion:()=>V,SphericalCoordinates:()=>z,Vector2:()=>l,Vector3:()=>f.default,Vector4:()=>d.default,_Euler:()=>K,_MathUtils:()=>W,_Pose:()=>G,_SphericalCoordinates:()=>z,acos:()=>i.Kh,asin:()=>i.ZR,assert:()=>M.Z,atan:()=>i.z4,checkNumber:()=>h.u5,clamp:()=>i.uZ,clone:()=>i.d9,config:()=>i.vc,configure:()=>i.jQ,cos:()=>i.mC,degrees:()=>i.RW,equals:()=>i.fS,exactEquals:()=>i.I6,formatValue:()=>i.Bw,isArray:()=>i.kJ,lerp:()=>i.t7,radians:()=>i.uR,sin:()=>i.O$,tan:()=>i.OR,toDegrees:()=>i.Ux,toRadians:()=>i.Yr,withEpsilon:()=>i.BJ});var i=r(34),s=r(521),h=r(281),n=r(685);function a(t,e,r){var i=e[0],s=e[1];return t[0]=r[0]*i+r[3]*s+r[6],t[1]=r[1]*i+r[4]*s+r[7],t}function o(t,e,r){var i=e[0],s=e[1];return t[0]=r[0]*i+r[4]*s+r[12],t[1]=r[1]*i+r[5]*s+r[13],t}u=new n.WT(2),n.WT!=Float32Array&&(u[0]=0,u[1]=0);var u,c=r(31);class l extends s.Z{constructor(t=0,e=0){super(2),(0,i.kJ)(t)&&1===arguments.length?this.copy(t):(i.vc.debug&&((0,h.u5)(t),(0,h.u5)(e)),this[0]=t,this[1]=e)}set(t,e){return this[0]=t,this[1]=e,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this.check()}fromObject(t){return i.vc.debug&&((0,h.u5)(t.x),(0,h.u5)(t.y)),this[0]=t.x,this[1]=t.y,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t}get ELEMENTS(){return 2}horizontalAngle(){return Math.atan2(this.y,this.x)}verticalAngle(){return Math.atan2(this.x,this.y)}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return o(this,this,t),this.check()}transformAsVector(t){return(0,c.pb)(this,this,t),this.check()}transformByMatrix3(t){return a(this,this,t),this.check()}transformByMatrix2x3(t){return function(t,e,r){var i=e[0],s=e[1];t[0]=r[0]*i+r[2]*s+r[4],t[1]=r[1]*i+r[3]*s+r[5]}(this,this,t),this.check()}transformByMatrix2(t){return function(t,e,r){var i=e[0],s=e[1];t[0]=r[0]*i+r[2]*s,t[1]=r[1]*i+r[3]*s}(this,this,t),this.check()}}var f=r(855),d=r(849),g=r(357),M=r(394);class m extends g.Z{get ELEMENTS(){return(0,M.Z)(!1),0}get RANK(){return(0,M.Z)(!1),0}toString(){let t="[";if(i.vc.printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let r=0;r<this.RANK;++r)t+=" ".concat(this[r*this.RANK+e])}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=" ".concat(this[e])}return t+="]",t}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,e,r){return this[e*this.RANK+t]=(0,h.u5)(r),this}getColumn(t,e=new Array(this.RANK).fill(-0)){const r=t*this.RANK;for(let t=0;t<this.RANK;++t)e[t]=this[r+t];return e}setColumn(t,e){const r=t*this.RANK;for(let t=0;t<this.RANK;++t)this[r+t]=e[t];return this}}function p(t,e,r){var i=e[0],s=e[1],h=e[2],n=e[3],a=e[4],o=e[5],u=e[6],c=e[7],l=e[8],f=r[0],d=r[1],g=r[2],M=r[3],m=r[4],p=r[5],E=r[6],x=r[7],y=r[8];return t[0]=f*i+d*n+g*u,t[1]=f*s+d*a+g*c,t[2]=f*h+d*o+g*l,t[3]=M*i+m*n+p*u,t[4]=M*s+m*a+p*c,t[5]=M*h+m*o+p*l,t[6]=E*i+x*n+y*u,t[7]=E*s+x*a+y*c,t[8]=E*h+x*o+y*l,t}function E(t,e,r){var i=r[0],s=r[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}var x=r(160);const y=Object.freeze([1,0,0,0,1,0,0,0,1]),v=Object.freeze([0,0,0,0,0,0,0,0,0]),S=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),w={};class b extends m{static get IDENTITY(){return w.IDENTITY=w.IDENTITY||Object.freeze(new b(y)),w.IDENTITY}static get ZERO(){return w.ZERO=w.ZERO||Object.freeze(new b(v)),w.ZERO}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return S}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}set(t,e,r,i,s,h,n,a,o){return this[0]=t,this[1]=e,this[2]=r,this[3]=i,this[4]=s,this[5]=h,this[6]=n,this[7]=a,this[8]=o,this.check()}setRowMajor(t,e,r,i,s,h,n,a,o){return this[0]=t,this[1]=i,this[2]=n,this[3]=e,this[4]=s,this[5]=a,this[6]=r,this[7]=h,this[8]=o,this.check()}determinant(){return e=(t=this)[0],r=t[1],i=t[2],s=t[3],h=t[4],n=t[5],a=t[6],o=t[7],e*((u=t[8])*h-n*o)+r*(-u*s+n*a)+i*(o*s-h*a);var t,e,r,i,s,h,n,a,o,u}identity(){return this.copy(y)}fromQuaternion(t){return function(t,e){var r=e[0],i=e[1],s=e[2],h=e[3],n=r+r,a=i+i,o=s+s,u=r*n,c=i*n,l=i*a,f=s*n,d=s*a,g=s*o,M=h*n,m=h*a,p=h*o;t[0]=1-l-g,t[3]=c-p,t[6]=f+m,t[1]=c+p,t[4]=1-u-g,t[7]=d-M,t[2]=f-m,t[5]=d+M,t[8]=1-u-l}(this,t),this.check()}transpose(){return function(t,e){if(t===e){var r=e[1],i=e[2],s=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=i,t[7]=s}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8]}(this,this),this.check()}invert(){return function(t,e){var r=e[0],i=e[1],s=e[2],h=e[3],n=e[4],a=e[5],o=e[6],u=e[7],c=e[8],l=c*n-a*u,f=-c*h+a*o,d=u*h-n*o,g=r*l+i*f+s*d;g&&(g=1/g,t[0]=l*g,t[1]=(-c*i+s*u)*g,t[2]=(a*i-s*n)*g,t[3]=f*g,t[4]=(c*r-s*o)*g,t[5]=(-a*r+s*h)*g,t[6]=d*g,t[7]=(-u*r+i*o)*g,t[8]=(n*r-i*h)*g)}(this,this),this.check()}multiplyLeft(t){return p(this,t,this),this.check()}multiplyRight(t){return p(this,this,t),this.check()}rotate(t){return function(t,e,r){var i=e[0],s=e[1],h=e[2],n=e[3],a=e[4],o=e[5],u=e[6],c=e[7],l=e[8],f=Math.sin(r),d=Math.cos(r);t[0]=d*i+f*n,t[1]=d*s+f*a,t[2]=d*h+f*o,t[3]=d*n-f*i,t[4]=d*a-f*s,t[5]=d*o-f*h,t[6]=u,t[7]=c,t[8]=l}(this,this,t),this.check()}scale(t){return Array.isArray(t)?E(this,this,t):E(this,this,[t,t,t]),this.check()}translate(t){return function(t,e,r){var i=e[0],s=e[1],h=e[2],n=e[3],a=e[4],o=e[5],u=e[6],c=e[7],l=e[8],f=r[0],d=r[1];t[0]=i,t[1]=s,t[2]=h,t[3]=n,t[4]=a,t[5]=o,t[6]=f*i+d*n+u,t[7]=f*s+d*a+c,t[8]=f*h+d*o+l}(this,this,t),this.check()}transform(t,e){switch(t.length){case 2:e=a(e||[-0,-0],t,this);break;case 3:e=x.kK(e||[-0,-0,-0],t,this);break;case 4:e=(0,c._x)(e||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,h.IL)(e,t.length),e}transformVector(t,e){return(0,h.x9)("Matrix3.transformVector"),this.transform(t,e)}transformVector2(t,e){return(0,h.x9)("Matrix3.transformVector"),this.transform(t,e)}transformVector3(t,e){return(0,h.x9)("Matrix3.transformVector"),this.transform(t,e)}}function O(t,e,r){var i=e[0],s=e[1],h=e[2],n=e[3],a=e[4],o=e[5],u=e[6],c=e[7],l=e[8],f=e[9],d=e[10],g=e[11],M=e[12],m=e[13],p=e[14],E=e[15],x=r[0],y=r[1],v=r[2],S=r[3];return t[0]=x*i+y*a+v*l+S*M,t[1]=x*s+y*o+v*f+S*m,t[2]=x*h+y*u+v*d+S*p,t[3]=x*n+y*c+v*g+S*E,x=r[4],y=r[5],v=r[6],S=r[7],t[4]=x*i+y*a+v*l+S*M,t[5]=x*s+y*o+v*f+S*m,t[6]=x*h+y*u+v*d+S*p,t[7]=x*n+y*c+v*g+S*E,x=r[8],y=r[9],v=r[10],S=r[11],t[8]=x*i+y*a+v*l+S*M,t[9]=x*s+y*o+v*f+S*m,t[10]=x*h+y*u+v*d+S*p,t[11]=x*n+y*c+v*g+S*E,x=r[12],y=r[13],v=r[14],S=r[15],t[12]=x*i+y*a+v*l+S*M,t[13]=x*s+y*o+v*f+S*m,t[14]=x*h+y*u+v*d+S*p,t[15]=x*n+y*c+v*g+S*E,t}function R(t,e,r){var i=r[0],s=r[1],h=r[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*h,t[9]=e[9]*h,t[10]=e[10]*h,t[11]=e[11]*h,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}!function(){var t=new n.WT(4);n.WT!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();const k=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),T=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),L=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),A={};class _ extends m{static get IDENTITY(){return A.IDENTITY=A.IDENTITY||Object.freeze(new _(k)),A.IDENTITY}static get ZERO(){return A.ZERO=A.ZERO||Object.freeze(new _(T)),A.ZERO}get INDICES(){return L}get ELEMENTS(){return 16}get RANK(){return 4}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,e,r,i,s,h,n,a,o,u,c,l,f,d,g,M){return this[0]=t,this[1]=e,this[2]=r,this[3]=i,this[4]=s,this[5]=h,this[6]=n,this[7]=a,this[8]=o,this[9]=u,this[10]=c,this[11]=l,this[12]=f,this[13]=d,this[14]=g,this[15]=M,this.check()}setRowMajor(t,e,r,i,s,h,n,a,o,u,c,l,f,d,g,M){return this[0]=t,this[1]=s,this[2]=o,this[3]=f,this[4]=e,this[5]=h,this[6]=u,this[7]=d,this[8]=r,this[9]=n,this[10]=c,this[11]=g,this[12]=i,this[13]=a,this[14]=l,this[15]=M,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(k)}fromQuaternion(t){return function(t,e){var r=e[0],i=e[1],s=e[2],h=e[3],n=r+r,a=i+i,o=s+s,u=r*n,c=i*n,l=i*a,f=s*n,d=s*a,g=s*o,M=h*n,m=h*a,p=h*o;t[0]=1-l-g,t[1]=c+p,t[2]=f-m,t[3]=0,t[4]=c-p,t[5]=1-u-g,t[6]=d+M,t[7]=0,t[8]=f+m,t[9]=d-M,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,t),this.check()}frustum({left:t,right:e,bottom:r,top:i,near:s,far:h}){return h===1/0?_._computeInfinitePerspectiveOffCenter(this,t,e,r,i,s):function(t,e,r,i,s,h,n){var a=1/(r-e),o=1/(s-i),u=1/(h-n);t[0]=2*h*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*h*o,t[6]=0,t[7]=0,t[8]=(r+e)*a,t[9]=(s+i)*o,t[10]=(n+h)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=n*h*2*u,t[15]=0}(this,t,e,r,i,s,h),this.check()}static _computeInfinitePerspectiveOffCenter(t,e,r,i,s,h){const n=2*h/(r-e),a=2*h/(s-i),o=(r+e)/(r-e),u=(s+i)/(s-i),c=-2*h;return t[0]=n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=o,t[9]=u,t[10]=-1,t[11]=-1,t[12]=0,t[13]=0,t[14]=c,t[15]=0,t}lookAt(t,e,r){return 1===arguments.length&&({eye:t,center:e,up:r}=t),function(t,e,r,i){var s,h,a,o,u,c,l,f,d,g,M=e[0],m=e[1],p=e[2],E=i[0],x=i[1],y=i[2],v=r[0],S=r[1],w=r[2];Math.abs(M-v)<n.Ib&&Math.abs(m-S)<n.Ib&&Math.abs(p-w)<n.Ib?function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(l=M-v,f=m-S,d=p-w,s=x*(d*=g=1/Math.hypot(l,f,d))-y*(f*=g),h=y*(l*=g)-E*d,a=E*f-x*l,(g=Math.hypot(s,h,a))?(s*=g=1/g,h*=g,a*=g):(s=0,h=0,a=0),o=f*a-d*h,u=d*s-l*a,c=l*h-f*s,(g=Math.hypot(o,u,c))?(o*=g=1/g,u*=g,c*=g):(o=0,u=0,c=0),t[0]=s,t[1]=o,t[2]=l,t[3]=0,t[4]=h,t[5]=u,t[6]=f,t[7]=0,t[8]=a,t[9]=c,t[10]=d,t[11]=0,t[12]=-(s*M+h*m+a*p),t[13]=-(o*M+u*m+c*p),t[14]=-(l*M+f*m+d*p),t[15]=1)}(this,t,e=e||[0,0,0],r=r||[0,1,0]),this.check()}ortho({left:t,right:e,bottom:r,top:i,near:s=.1,far:h=500}){return function(t,e,r,i,s,h,n){var a=1/(e-r),o=1/(i-s),u=1/(h-n);t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*a,t[13]=(s+i)*o,t[14]=(n+h)*u,t[15]=1}(this,t,e,r,i,s,h),this.check()}orthographic({fovy:t=45*Math.PI/180,aspect:e=1,focalDistance:r=1,near:i=.1,far:s=500}){if(t>2*Math.PI)throw Error("radians");const h=t/2,n=r*Math.tan(h),a=n*e;return(new _).ortho({left:-a,right:a,bottom:-n,top:n,near:i,far:s})}perspective({fovy:t,fov:e=45*Math.PI/180,aspect:r=1,near:i=.1,far:s=500}={}){if((t=t||e)>2*Math.PI)throw Error("radians");return function(t,e,r,i,s){var h,n=1/Math.tan(e/2);t[0]=n/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=s&&s!==1/0?(h=1/(i-s),t[10]=(s+i)*h,t[14]=2*s*i*h):(t[10]=-1,t[14]=-2*i)}(this,t,r,i,s),this.check()}determinant(){return e=(t=this)[0],r=t[1],i=t[2],s=t[3],h=t[4],n=t[5],a=t[6],o=t[7],u=t[8],c=t[9],l=t[10],f=t[11],d=t[12],g=t[13],M=t[14],(e*n-r*h)*(l*(m=t[15])-f*M)-(e*a-i*h)*(c*m-f*g)+(e*o-s*h)*(c*M-l*g)+(r*a-i*n)*(u*m-f*d)-(r*o-s*n)*(u*M-l*d)+(i*o-s*a)*(u*g-c*d);var t,e,r,i,s,h,n,a,o,u,c,l,f,d,g,M,m}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=null){const r=this.getScale(e||[-0,-0,-0]),i=1/r[0],s=1/r[1],h=1/r[2];return t[0]=this[0]*i,t[1]=this[1]*s,t[2]=this[2]*h,t[3]=0,t[4]=this[4]*i,t[5]=this[5]*s,t[6]=this[6]*h,t[7]=0,t[8]=this[8]*i,t[9]=this[9]*s,t[10]=this[10]*h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t=[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=null){const r=this.getScale(e||[-0,-0,-0]),i=1/r[0],s=1/r[1],h=1/r[2];return t[0]=this[0]*i,t[1]=this[1]*s,t[2]=this[2]*h,t[3]=this[4]*i,t[4]=this[5]*s,t[5]=this[6]*h,t[6]=this[8]*i,t[7]=this[9]*s,t[8]=this[10]*h,t}transpose(){return function(t,e){if(t===e){var r=e[1],i=e[2],s=e[3],h=e[6],n=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=h,t[11]=e[14],t[12]=s,t[13]=n,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}invert(){return function(t,e){var r=e[0],i=e[1],s=e[2],h=e[3],n=e[4],a=e[5],o=e[6],u=e[7],c=e[8],l=e[9],f=e[10],d=e[11],g=e[12],M=e[13],m=e[14],p=e[15],E=r*a-i*n,x=r*o-s*n,y=r*u-h*n,v=i*o-s*a,S=i*u-h*a,w=s*u-h*o,b=c*M-l*g,O=c*m-f*g,R=c*p-d*g,k=l*m-f*M,T=l*p-d*M,L=f*p-d*m,A=E*L-x*T+y*k+v*R-S*O+w*b;A&&(A=1/A,t[0]=(a*L-o*T+u*k)*A,t[1]=(s*T-i*L-h*k)*A,t[2]=(M*w-m*S+p*v)*A,t[3]=(f*S-l*w-d*v)*A,t[4]=(o*R-n*L-u*O)*A,t[5]=(r*L-s*R+h*O)*A,t[6]=(m*y-g*w-p*x)*A,t[7]=(c*w-f*y+d*x)*A,t[8]=(n*T-a*R+u*b)*A,t[9]=(i*R-r*T-h*b)*A,t[10]=(g*S-M*y+p*E)*A,t[11]=(l*y-c*S-d*E)*A,t[12]=(a*O-n*k-o*b)*A,t[13]=(r*k-i*O+s*b)*A,t[14]=(M*x-g*v-m*E)*A,t[15]=(c*v-l*x+f*E)*A)}(this,this),this.check()}multiplyLeft(t){return O(this,t,this),this.check()}multiplyRight(t){return O(this,this,t),this.check()}rotateX(t){return function(t,e,r){var i=Math.sin(r),s=Math.cos(r),h=e[4],n=e[5],a=e[6],o=e[7],u=e[8],c=e[9],l=e[10],f=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=h*s+u*i,t[5]=n*s+c*i,t[6]=a*s+l*i,t[7]=o*s+f*i,t[8]=u*s-h*i,t[9]=c*s-n*i,t[10]=l*s-a*i,t[11]=f*s-o*i}(this,this,t),this.check()}rotateY(t){return function(t,e,r){var i=Math.sin(r),s=Math.cos(r),h=e[0],n=e[1],a=e[2],o=e[3],u=e[8],c=e[9],l=e[10],f=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=h*s-u*i,t[1]=n*s-c*i,t[2]=a*s-l*i,t[3]=o*s-f*i,t[8]=h*i+u*s,t[9]=n*i+c*s,t[10]=a*i+l*s,t[11]=o*i+f*s}(this,this,t),this.check()}rotateZ(t){return function(t,e,r){var i=Math.sin(r),s=Math.cos(r),h=e[0],n=e[1],a=e[2],o=e[3],u=e[4],c=e[5],l=e[6],f=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=h*s+u*i,t[1]=n*s+c*i,t[2]=a*s+l*i,t[3]=o*s+f*i,t[4]=u*s-h*i,t[5]=c*s-n*i,t[6]=l*s-a*i,t[7]=f*s-o*i}(this,this,t),this.check()}rotateXYZ([t,e,r]){return this.rotateX(t).rotateY(e).rotateZ(r)}rotateAxis(t,e){return function(t,e,r,i){var s,h,a,o,u,c,l,f,d,g,M,m,p,E,x,y,v,S,w,b,O,R,k,T,L=i[0],A=i[1],_=i[2],I=Math.hypot(L,A,_);I<n.Ib||(L*=I=1/I,A*=I,_*=I,s=Math.sin(r),a=1-(h=Math.cos(r)),o=e[0],u=e[1],c=e[2],l=e[3],f=e[4],d=e[5],g=e[6],M=e[7],m=e[8],p=e[9],E=e[10],x=e[11],y=L*L*a+h,v=A*L*a+_*s,S=_*L*a-A*s,w=L*A*a-_*s,b=A*A*a+h,O=_*A*a+L*s,R=L*_*a+A*s,k=A*_*a-L*s,T=_*_*a+h,t[0]=o*y+f*v+m*S,t[1]=u*y+d*v+p*S,t[2]=c*y+g*v+E*S,t[3]=l*y+M*v+x*S,t[4]=o*w+f*b+m*O,t[5]=u*w+d*b+p*O,t[6]=c*w+g*b+E*O,t[7]=l*w+M*b+x*O,t[8]=o*R+f*k+m*T,t[9]=u*R+d*k+p*T,t[10]=c*R+g*k+E*T,t[11]=l*R+M*k+x*T,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,t,e),this.check()}scale(t){return Array.isArray(t)?R(this,this,t):R(this,this,[t,t,t]),this.check()}translate(t){return function(t,e,r){var i,s,h,n,a,o,u,c,l,f,d,g,M=r[0],m=r[1],p=r[2];e===t?(t[12]=e[0]*M+e[4]*m+e[8]*p+e[12],t[13]=e[1]*M+e[5]*m+e[9]*p+e[13],t[14]=e[2]*M+e[6]*m+e[10]*p+e[14],t[15]=e[3]*M+e[7]*m+e[11]*p+e[15]):(i=e[0],s=e[1],h=e[2],n=e[3],a=e[4],o=e[5],u=e[6],c=e[7],l=e[8],f=e[9],d=e[10],g=e[11],t[0]=i,t[1]=s,t[2]=h,t[3]=n,t[4]=a,t[5]=o,t[6]=u,t[7]=c,t[8]=l,t[9]=f,t[10]=d,t[11]=g,t[12]=i*M+a*m+l*p+e[12],t[13]=s*M+o*m+f*p+e[13],t[14]=h*M+u*m+d*p+e[14],t[15]=n*M+c*m+g*p+e[15])}(this,this,t),this.check()}transform(t,e){return 4===t.length?(e=function(t,e,r){var i=e[0],s=e[1],h=e[2],n=e[3];return t[0]=r[0]*i+r[4]*s+r[8]*h+r[12]*n,t[1]=r[1]*i+r[5]*s+r[9]*h+r[13]*n,t[2]=r[2]*i+r[6]*s+r[10]*h+r[14]*n,t[3]=r[3]*i+r[7]*s+r[11]*h+r[15]*n,t}(e||[-0,-0,-0,-0],t,this),(0,h.IL)(e,4),e):this.transformAsPoint(t,e)}transformAsPoint(t,e){const{length:r}=t;switch(r){case 2:e=o(e||[-0,-0],t,this);break;case 3:e=x.fF(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,h.IL)(e,t.length),e}transformAsVector(t,e){switch(t.length){case 2:e=(0,c.pb)(e||[-0,-0],t,this);break;case 3:e=(0,c.pL)(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return(0,h.IL)(e,t.length),e}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,e,r){return this.identity().translate([t,e,r])}transformPoint(t,e){return(0,h.x9)("Matrix4.transformPoint","3.0"),this.transformAsPoint(t,e)}transformVector(t,e){return(0,h.x9)("Matrix4.transformVector","3.0"),this.transformAsPoint(t,e)}transformDirection(t,e){return(0,h.x9)("Matrix4.transformDirection","3.0"),this.transformAsVector(t,e)}}function I(){var t=new n.WT(4);return n.WT!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function N(t,e,r){r*=.5;var i=Math.sin(r);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(r),t}function P(t,e,r){var i=e[0],s=e[1],h=e[2],n=e[3],a=r[0],o=r[1],u=r[2],c=r[3];return t[0]=i*c+n*a+s*u-h*o,t[1]=s*c+n*o+h*a-i*u,t[2]=h*c+n*u+i*o-s*a,t[3]=n*c-i*a-s*o-h*u,t}var Z,j,C,Y=function(t){var e=t[0],r=t[1],i=t[2],s=t[3];return Math.hypot(e,r,i,s)},F=function(t){var e=t[0],r=t[1],i=t[2],s=t[3];return e*e+r*r+i*i+s*s},X=(Z=x.Ue(),j=x.al(1,0,0),C=x.al(0,1,0),function(t,e,r){var i=x.AK(e,r);return i<-.999999?(x.kC(Z,j,e),x.Zh(Z)<1e-6&&x.kC(Z,C,e),x.Fv(Z,Z),N(t,Z,Math.PI),t):i>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(x.kC(Z,e,r),t[0]=Z[0],t[1]=Z[1],t[2]=Z[2],t[3]=1+i,function(t,e){var r=e[0],i=e[1],s=e[2],h=e[3],n=r*r+i*i+s*s+h*h;return n>0&&(n=1/Math.sqrt(n)),t[0]=r*n,t[1]=i*n,t[2]=s*n,t[3]=h*n,t}(t,t))});I(),I(),function(){var t=new n.WT(9);n.WT!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1}();const D=[0,0,0,1];class V extends g.Z{constructor(t=0,e=0,r=0,i=1){super(-0,-0,-0,-0),Array.isArray(t)&&1===arguments.length?this.copy(t):this.set(t,e,r,i)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,e,r,i){return this[0]=t,this[1]=e,this[2]=r,this[3]=i,this.check()}fromMatrix3(t){return function(t,e){var r,i=e[0]+e[4]+e[8];if(i>0)r=Math.sqrt(i+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var s=0;e[4]>e[0]&&(s=1),e[8]>e[3*s+s]&&(s=2);var h=(s+1)%3,n=(s+2)%3;r=Math.sqrt(e[3*s+s]-e[3*h+h]-e[3*n+n]+1),t[s]=.5*r,r=.5/r,t[3]=(e[3*h+n]-e[3*n+h])*r,t[h]=(e[3*h+s]+e[3*s+h])*r,t[n]=(e[3*n+s]+e[3*s+n])*r}}(this,t),this.check()}identity(){return function(t){t[0]=0,t[1]=0,t[2]=0,t[3]=1}(this),this.check()}fromAxisRotation(t,e){return N(this,t,e),this.check()}setAxisAngle(t,e){return this.fromAxisRotation(t,e)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=(0,h.u5)(t)}get y(){return this[1]}set y(t){this[1]=(0,h.u5)(t)}get z(){return this[2]}set z(t){this[2]=(0,h.u5)(t)}get w(){return this[3]}set w(t){this[3]=(0,h.u5)(t)}len(){return Y(this)}lengthSquared(){return F(this)}dot(t,e){if(void 0!==e)throw new Error("Quaternion.dot only takes one argument");return function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}(this,t)}rotationTo(t,e){return X(this,t,e),this.check()}add(t,e){if(void 0!==e)throw new Error("Quaternion.add only takes one argument");return function(t,e,r){t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3]}(this,this,t),this.check()}calculateW(){return function(t,e){var r=e[0],i=e[1],s=e[2];t[0]=r,t[1]=i,t[2]=s,t[3]=Math.sqrt(Math.abs(1-r*r-i*i-s*s))}(this,this),this.check()}conjugate(){return function(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3]}(this,this),this.check()}invert(){return function(t,e){var r=e[0],i=e[1],s=e[2],h=e[3],n=r*r+i*i+s*s+h*h,a=n?1/n:0;t[0]=-r*a,t[1]=-i*a,t[2]=-s*a,t[3]=h*a}(this,this),this.check()}lerp(t,e,r){return function(t,e,r,i){var s=e[0],h=e[1],n=e[2],a=e[3];t[0]=s+i*(r[0]-s),t[1]=h+i*(r[1]-h),t[2]=n+i*(r[2]-n),t[3]=a+i*(r[3]-a)}(this,t,e,r),this.check()}multiplyRight(t,e){return(0,M.Z)(!e),P(this,this,t),this.check()}multiplyLeft(t,e){return(0,M.Z)(!e),P(this,t,this),this.check()}normalize(){const t=this.len(),e=t>0?1/t:0;return this[0]=this[0]*e,this[1]=this[1]*e,this[2]=this[2]*e,this[3]=this[3]*e,0===t&&(this[3]=1),this.check()}rotateX(t){return function(t,e,r){r*=.5;var i=e[0],s=e[1],h=e[2],n=e[3],a=Math.sin(r),o=Math.cos(r);t[0]=i*o+n*a,t[1]=s*o+h*a,t[2]=h*o-s*a,t[3]=n*o-i*a}(this,this,t),this.check()}rotateY(t){return function(t,e,r){r*=.5;var i=e[0],s=e[1],h=e[2],n=e[3],a=Math.sin(r),o=Math.cos(r);t[0]=i*o-h*a,t[1]=s*o+n*a,t[2]=h*o+i*a,t[3]=n*o-s*a}(this,this,t),this.check()}rotateZ(t){return function(t,e,r){r*=.5;var i=e[0],s=e[1],h=e[2],n=e[3],a=Math.sin(r),o=Math.cos(r);t[0]=i*o+s*a,t[1]=s*o-i*a,t[2]=h*o+n*a,t[3]=n*o-h*a}(this,this,t),this.check()}scale(t){return function(t,e,r){t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r}(this,this,t),this.check()}slerp(t,e,r){switch(arguments.length){case 1:({start:t=D,target:e,ratio:r}=arguments[0]);break;case 2:[e,r]=arguments,t=this}return function(t,e,r,i){var s,h,a,o,u,c=e[0],l=e[1],f=e[2],d=e[3],g=r[0],M=r[1],m=r[2],p=r[3];(h=c*g+l*M+f*m+d*p)<0&&(h=-h,g=-g,M=-M,m=-m,p=-p),1-h>n.Ib?(s=Math.acos(h),a=Math.sin(s),o=Math.sin((1-i)*s)/a,u=Math.sin(i*s)/a):(o=1-i,u=i),t[0]=o*c+u*g,t[1]=o*l+u*M,t[2]=o*f+u*m,t[3]=o*d+u*p}(this,t,e,r),this.check()}transformVector4(t,e=t){return function(t,e,r){var i=e[0],s=e[1],h=e[2],n=r[0],a=r[1],o=r[2],u=r[3],c=u*i+a*h-o*s,l=u*s+o*i-n*h,f=u*h+n*s-a*i,d=-n*i-a*s-o*h;t[0]=c*u+d*-n+l*-o-f*-a,t[1]=l*u+d*-a+f*-n-c*-o,t[2]=f*u+d*-o+c*-a-l*-n,t[3]=e[3]}(e,t,this),(0,h.IL)(e,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,e){return this.setAxisAngle(t,e)}premultiply(t,e){return this.multiplyLeft(t,e)}multiply(t,e){return this.multiplyRight(t,e)}}const W={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:2*Math.PI},q=1e-6;class z{constructor({phi:t=0,theta:e=0,radius:r=1,bearing:i,pitch:s,altitude:h,radiusScale:n=6371e3}={}){this.phi=t,this.theta=e,this.radius=r||h||1,this.radiusScale=n||1,void 0!==i&&(this.bearing=i),void 0!==s&&(this.pitch=s),this.check()}toString(){return this.formatString(i.vc)}formatString({printTypes:t=!1}){const e=i.Bw;return"".concat(t?"Spherical":"","[rho:").concat(e(this.radius),",theta:").concat(e(this.theta),",phi:").concat(e(this.phi),"]")}equals(t){return(0,i.fS)(this.radius,t.radius)&&(0,i.fS)(this.theta,t.theta)&&(0,i.fS)(this.phi,t.phi)}exactEquals(t){return this.radius===t.radius&&this.theta===t.theta&&this.phi===t.phi}get bearing(){return 180-(0,i.RW)(this.phi)}set bearing(t){this.phi=Math.PI-(0,i.uR)(t)}get pitch(){return(0,i.RW)(this.theta)}set pitch(t){this.theta=(0,i.uR)(t)}get longitude(){return(0,i.RW)(this.phi)}get latitude(){return(0,i.RW)(this.theta)}get lng(){return(0,i.RW)(this.phi)}get lat(){return(0,i.RW)(this.theta)}get z(){return(this.radius-1)*this.radiusScale}set(t,e,r){return this.radius=t,this.phi=e,this.theta=r,this.check()}clone(){return(new z).copy(this)}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this.check()}fromLngLatZ([t,e,r]){this.radius=1+r/this.radiusScale,this.phi=(0,i.uR)(e),this.theta=(0,i.uR)(t)}fromVector3(t){return this.radius=x.kE(t),this.radius>0&&(this.theta=Math.atan2(t[0],t[1]),this.phi=Math.acos((0,i.uZ)(t[2]/this.radius,-1,1))),this.check()}toVector3(){return new f.default(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}makeSafe(){return this.phi=Math.max(q,Math.min(Math.PI-q,this.phi)),this}check(){if(!(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}}const B="Unknown Euler angle order",U=.99999;class K extends g.Z{static get ZYX(){return 0}static get YXZ(){return 1}static get XZY(){return 2}static get ZXY(){return 3}static get YZX(){return 4}static get XYZ(){return 5}static get RollPitchYaw(){return 0}static get DefaultOrder(){return K.ZYX}static get RotationOrders(){return["ZYX","YXZ","XZY","ZXY","YZX","XYZ"]}static rotationOrder(t){return K.RotationOrders[t]}get ELEMENTS(){return 4}constructor(t=0,e=0,r=0,i=K.DefaultOrder){super(-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])?this.fromVector3(...arguments):this.set(t,e,r,i)}fromQuaternion(t){const[e,r,i,s]=t,h=r*r,n=-2*(h+i*i)+1,a=2*(e*r+s*i);let o=-2*(e*i-s*r);const u=2*(r*i+s*e),c=-2*(e*e+h)+1;o=o>1?1:o,o=o<-1?-1:o;const l=Math.atan2(u,c),f=Math.asin(o),d=Math.atan2(a,n);return new K(l,f,d,K.RollPitchYaw)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=Number.isFinite(t[3])||this.order,this.check()}set(t=0,e=0,r=0,i){return this[0]=t,this[1]=e,this[2]=r,this[3]=Number.isFinite(i)?i:this[3],this.check()}validate(){return(t=this[3])>=0&&t<6&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2]);var t}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}toArray4(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t}toVector3(t=[-0,-0,-0]){return t[0]=this[0],t[1]=this[1],t[2]=this[2],t}get x(){return this[0]}set x(t){this[0]=(0,h.u5)(t)}get y(){return this[1]}set y(t){this[1]=(0,h.u5)(t)}get z(){return this[2]}set z(t){this[2]=(0,h.u5)(t)}get alpha(){return this[0]}set alpha(t){this[0]=(0,h.u5)(t)}get beta(){return this[1]}set beta(t){this[1]=(0,h.u5)(t)}get gamma(){return this[2]}set gamma(t){this[2]=(0,h.u5)(t)}get phi(){return this[0]}set phi(t){this[0]=(0,h.u5)(t)}get theta(){return this[1]}set theta(t){this[1]=(0,h.u5)(t)}get psi(){return this[2]}set psi(t){this[2]=(0,h.u5)(t)}get roll(){return this[0]}set roll(t){this[0]=(0,h.u5)(t)}get pitch(){return this[1]}set pitch(t){this[1]=(0,h.u5)(t)}get yaw(){return this[2]}set yaw(t){this[2]=(0,h.u5)(t)}get order(){return this[3]}set order(t){this[3]=function(t){if(t<0&&t>=6)throw new Error(B);return t}(t)}fromVector3(t,e){return this.set(t[0],t[1],t[2],Number.isFinite(e)?e:this[3])}fromArray(t,e=0){return this[0]=t[0+e],this[1]=t[1+e],this[2]=t[2+e],void 0!==t[3]&&(this[3]=t[3]),this.check()}fromRollPitchYaw(t,e,r){return this.set(t,e,r,K.ZYX)}fromRotationMatrix(t,e=K.DefaultOrder){return this._fromRotationMatrix(t,e),this.check()}getRotationMatrix(t){return this._getRotationMatrix(t)}getQuaternion(){const t=new V;switch(this[3]){case K.XYZ:return t.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case K.YXZ:return t.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case K.ZXY:return t.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case K.ZYX:return t.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case K.YZX:return t.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case K.XZY:return t.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(B)}}_fromRotationMatrix(t,e=K.DefaultOrder){const r=t.elements,s=r[0],h=r[4],n=r[8],a=r[1],o=r[5],u=r[9],c=r[2],l=r[6],f=r[10];switch(e=e||this[3]){case K.XYZ:this[1]=Math.asin((0,i.uZ)(n,-1,1)),Math.abs(n)<U?(this[0]=Math.atan2(-u,f),this[2]=Math.atan2(-h,s)):(this[0]=Math.atan2(l,o),this[2]=0);break;case K.YXZ:this[0]=Math.asin(-(0,i.uZ)(u,-1,1)),Math.abs(u)<U?(this[1]=Math.atan2(n,f),this[2]=Math.atan2(a,o)):(this[1]=Math.atan2(-c,s),this[2]=0);break;case K.ZXY:this[0]=Math.asin((0,i.uZ)(l,-1,1)),Math.abs(l)<U?(this[1]=Math.atan2(-c,f),this[2]=Math.atan2(-h,o)):(this[1]=0,this[2]=Math.atan2(a,s));break;case K.ZYX:this[1]=Math.asin(-(0,i.uZ)(c,-1,1)),Math.abs(c)<U?(this[0]=Math.atan2(l,f),this[2]=Math.atan2(a,s)):(this[0]=0,this[2]=Math.atan2(-h,o));break;case K.YZX:this[2]=Math.asin((0,i.uZ)(a,-1,1)),Math.abs(a)<U?(this[0]=Math.atan2(-u,o),this[1]=Math.atan2(-c,s)):(this[0]=0,this[1]=Math.atan2(n,f));break;case K.XZY:this[2]=Math.asin(-(0,i.uZ)(h,-1,1)),Math.abs(h)<U?(this[0]=Math.atan2(l,o),this[1]=Math.atan2(n,s)):(this[0]=Math.atan2(-u,f),this[1]=0);break;default:throw new Error(B)}return this[3]=e,this}_getRotationMatrix(t){const e=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],r=this.x,i=this.y,s=this.z,h=Math.cos(r),n=Math.cos(i),a=Math.cos(s),o=Math.sin(r),u=Math.sin(i),c=Math.sin(s);switch(this[3]){case K.XYZ:{const t=h*a,r=h*c,i=o*a,s=o*c;e[0]=n*a,e[4]=-n*c,e[8]=u,e[1]=r+i*u,e[5]=t-s*u,e[9]=-o*n,e[2]=s-t*u,e[6]=i+r*u,e[10]=h*n;break}case K.YXZ:{const t=n*a,r=n*c,i=u*a,s=u*c;e[0]=t+s*o,e[4]=i*o-r,e[8]=h*u,e[1]=h*c,e[5]=h*a,e[9]=-o,e[2]=r*o-i,e[6]=s+t*o,e[10]=h*n;break}case K.ZXY:{const t=n*a,r=n*c,i=u*a,s=u*c;e[0]=t-s*o,e[4]=-h*c,e[8]=i+r*o,e[1]=r+i*o,e[5]=h*a,e[9]=s-t*o,e[2]=-h*u,e[6]=o,e[10]=h*n;break}case K.ZYX:{const t=h*a,r=h*c,i=o*a,s=o*c;e[0]=n*a,e[4]=i*u-r,e[8]=t*u+s,e[1]=n*c,e[5]=s*u+t,e[9]=r*u-i,e[2]=-u,e[6]=o*n,e[10]=h*n;break}case K.YZX:{const t=h*n,r=h*u,i=o*n,s=o*u;e[0]=n*a,e[4]=s-t*c,e[8]=i*c+r,e[1]=c,e[5]=h*a,e[9]=-o*a,e[2]=-u*a,e[6]=r*c+i,e[10]=t-s*c;break}case K.XZY:{const t=h*n,r=h*u,i=o*n,s=o*u;e[0]=n*a,e[4]=-c,e[8]=u*a,e[1]=t*c+s,e[5]=h*a,e[9]=r*c-i,e[2]=i*c-r,e[6]=o*a,e[10]=s*c+t;break}default:throw new Error(B)}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}toQuaternion(){const t=Math.cos(.5*this.yaw),e=Math.sin(.5*this.yaw),r=Math.cos(.5*this.roll),i=Math.sin(.5*this.roll),s=Math.cos(.5*this.pitch),h=Math.sin(.5*this.pitch);return new V(t*i*s-e*r*h,t*r*h+e*i*s,e*r*s-t*i*h,t*r*s+e*i*h)}}class G{constructor({x:t=0,y:e=0,z:r=0,roll:i=0,pitch:s=0,yaw:h=0,position:n,orientation:a}={}){Array.isArray(n)&&3===n.length?this.position=new f.default(n):this.position=new f.default(t,e,r),Array.isArray(a)&&4===a.length?this.orientation=new K(a,a[3]):this.orientation=new K(i,s,h,K.RollPitchYaw)}get x(){return this.position.x}set x(t){this.position.x=t}get y(){return this.position.y}set y(t){this.position.y=t}get z(){return this.position.z}set z(t){this.position.z=t}get roll(){return this.orientation.roll}set roll(t){this.orientation.roll=t}get pitch(){return this.orientation.pitch}set pitch(t){this.orientation.pitch=t}get yaw(){return this.orientation.yaw}set yaw(t){this.orientation.yaw=t}getPosition(){return this.position}getOrientation(){return this.orientation}equals(t){return!!t&&this.position.equals(t.position)&&this.orientation.equals(t.orientation)}exactEquals(t){return!!t&&this.position.exactEquals(t.position)&&this.orientation.exactEquals(t.orientation)}getTransformationMatrix(){const t=Math.sin(this.roll),e=Math.sin(this.pitch),r=Math.sin(this.yaw),i=Math.cos(this.roll),s=Math.cos(this.pitch),h=Math.cos(this.yaw);return(new _).setRowMajor(h*s,-r*i+h*e*t,r*t+h*e*i,this.x,r*s,h*i+r*e*t,-h*t+r*e*i,this.y,-e,s*t,s*i,this.z,0,0,0,1)}getTransformationMatrixFromPose(t){return(new _).multiplyRight(this.getTransformationMatrix()).multiplyRight(t.getTransformationMatrix().invert())}getTransformationMatrixToPose(t){return(new _).multiplyRight(t.getTransformationMatrix()).multiplyRight(this.getTransformationMatrix().invert())}}const Q="undefined"!=typeof self&&self,H="undefined"!=typeof window&&window;(void 0!==r.g&&r.g||Q||H).mathgl={config:i.vc}},394:(t,e,r)=>{function i(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}r.d(e,{Z:()=>i})},34:(t,e,r)=>{r.d(e,{vc:()=>n,jQ:()=>a,Bw:()=>o,kJ:()=>u,d9:()=>c,Yr:()=>f,Ux:()=>d,uR:()=>g,RW:()=>M,O$:()=>m,mC:()=>p,OR:()=>E,ZR:()=>x,Kh:()=>y,z4:()=>v,uZ:()=>S,t7:()=>w,fS:()=>b,I6:()=>O,BJ:()=>R});var i=r(394);const s=1/Math.PI*180,h=1/180*Math.PI,n={};function a(t={}){for(const e in t)(0,i.Z)(e in n),n[e]=t[e];return n}function o(t,{precision:e=n.precision||4}={}){return t=function(t){return Math.round(t/n.EPSILON)*n.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function u(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function c(t){return t.clone?t.clone():new Array(...t)}function l(t,e,r){if(u(t)){r=r||((i=t).clone?i.clone():new Array(i.length));for(let i=0;i<r.length&&i<t.length;++i)r[i]=e(t[i],i,r);return r}var i;return e(t)}function f(t){return g(t)}function d(t){return M(t)}function g(t,e){return l(t,(t=>t*h),e)}function M(t,e){return l(t,(t=>t*s),e)}function m(t){return l(t,(t=>Math.sin(t)))}function p(t){return l(t,(t=>Math.cos(t)))}function E(t){return l(t,(t=>Math.tan(t)))}function x(t){return l(t,(t=>Math.asin(t)))}function y(t){return l(t,(t=>Math.acos(t)))}function v(t){return l(t,(t=>Math.atan(t)))}function S(t,e,r){return l(t,(t=>Math.max(e,Math.min(r,t))))}function w(t,e,r){return u(t)?t.map(((t,i)=>w(t,e[i],r))):r*e+(1-r)*t}function b(t,e,r){const i=n.EPSILON;r&&(n.EPSILON=r);try{if(t===e)return!0;if(u(t)&&u(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!b(t[r],e[r]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):!(!Number.isFinite(t)||!Number.isFinite(e))&&Math.abs(t-e)<=n.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{n.EPSILON=i}}function O(t,e){if(t===e)return!0;if(t&&"object"==typeof t&&e&&"object"==typeof e){if(t.constructor!==e.constructor)return!1;if(t.exactEquals)return t.exactEquals(e)}if(u(t)&&u(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!O(t[r],e[r]))return!1;return!0}return!1}function R(t,e){const r=n.EPSILON;let i;n.EPSILON=t;try{i=e()}finally{n.EPSILON=r}return i}n.EPSILON=1e-12,n.debug=!1,n.precision=4,n.printTypes=!1,n.printDegrees=!1,n.printRowMajor=!0},31:(t,e,r)=>{function i(t,e,r){const i=e[0],s=e[1],h=r[3]*i+r[7]*s||1;return t[0]=(r[0]*i+r[4]*s)/h,t[1]=(r[1]*i+r[5]*s)/h,t}function s(t,e,r){const i=e[0],s=e[1],h=e[2],n=r[3]*i+r[7]*s+r[11]*h||1;return t[0]=(r[0]*i+r[4]*s+r[8]*h)/n,t[1]=(r[1]*i+r[5]*s+r[9]*h)/n,t[2]=(r[2]*i+r[6]*s+r[10]*h)/n,t}function h(t,e,r){const i=e[0],s=e[1];return t[0]=r[0]*i+r[2]*s,t[1]=r[1]*i+r[3]*s,t[2]=e[2],t}function n(t,e,r){const i=e[0],s=e[1];return t[0]=r[0]*i+r[2]*s,t[1]=r[1]*i+r[3]*s,t[2]=e[2],t[3]=e[3],t}function a(t,e,r){const i=e[0],s=e[1],h=e[2];return t[0]=r[0]*i+r[3]*s+r[6]*h,t[1]=r[1]*i+r[4]*s+r[7]*h,t[2]=r[2]*i+r[5]*s+r[8]*h,t[3]=e[3],t}r.d(e,{pb:()=>i,pL:()=>s,eQ:()=>h,G7:()=>n,_x:()=>a})},281:(t,e,r)=>{r.d(e,{u5:()=>s,IL:()=>h,x9:()=>a});var i=r(34);function s(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function h(t,e,r=""){if(i.vc.debug&&!function(t,e){if(t.length!==e)return!1;for(let e=0;e<t.length;++e)if(!Number.isFinite(t[e]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(r," some fields set to invalid numbers'"));return t}const n={};function a(t,e){n[t]||(n[t]=!0,console.warn("".concat(t," has been removed in version ").concat(e,", see upgrade guide for more information")))}},685:(t,e,r)=>{r.d(e,{Ib:()=>i,WT:()=>s});var i=1e-6,s="undefined"!=typeof Float32Array?Float32Array:Array;Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)})},160:(t,e,r)=>{r.d(e,{Ue:()=>s,kE:()=>h,al:()=>n,Fv:()=>a,AK:()=>o,kC:()=>u,fF:()=>c,kK:()=>l,VC:()=>f,lM:()=>d,uD:()=>g,jI:()=>M,EU:()=>m,Zh:()=>p});var i=r(685);function s(){var t=new i.WT(3);return i.WT!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function h(t){var e=t[0],r=t[1],i=t[2];return Math.hypot(e,r,i)}function n(t,e,r){var s=new i.WT(3);return s[0]=t,s[1]=e,s[2]=r,s}function a(t,e){var r=e[0],i=e[1],s=e[2],h=r*r+i*i+s*s;return h>0&&(h=1/Math.sqrt(h)),t[0]=e[0]*h,t[1]=e[1]*h,t[2]=e[2]*h,t}function o(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function u(t,e,r){var i=e[0],s=e[1],h=e[2],n=r[0],a=r[1],o=r[2];return t[0]=s*o-h*a,t[1]=h*n-i*o,t[2]=i*a-s*n,t}function c(t,e,r){var i=e[0],s=e[1],h=e[2],n=r[3]*i+r[7]*s+r[11]*h+r[15];return n=n||1,t[0]=(r[0]*i+r[4]*s+r[8]*h+r[12])/n,t[1]=(r[1]*i+r[5]*s+r[9]*h+r[13])/n,t[2]=(r[2]*i+r[6]*s+r[10]*h+r[14])/n,t}function l(t,e,r){var i=e[0],s=e[1],h=e[2];return t[0]=i*r[0]+s*r[3]+h*r[6],t[1]=i*r[1]+s*r[4]+h*r[7],t[2]=i*r[2]+s*r[5]+h*r[8],t}function f(t,e,r){var i=r[0],s=r[1],h=r[2],n=r[3],a=e[0],o=e[1],u=e[2],c=s*u-h*o,l=h*a-i*u,f=i*o-s*a,d=s*f-h*l,g=h*c-i*f,M=i*l-s*c,m=2*n;return c*=m,l*=m,f*=m,d*=2,g*=2,M*=2,t[0]=a+c+d,t[1]=o+l+g,t[2]=u+f+M,t}function d(t,e,r,i){var s=[],h=[];return s[0]=e[0]-r[0],s[1]=e[1]-r[1],s[2]=e[2]-r[2],h[0]=s[0],h[1]=s[1]*Math.cos(i)-s[2]*Math.sin(i),h[2]=s[1]*Math.sin(i)+s[2]*Math.cos(i),t[0]=h[0]+r[0],t[1]=h[1]+r[1],t[2]=h[2]+r[2],t}function g(t,e,r,i){var s=[],h=[];return s[0]=e[0]-r[0],s[1]=e[1]-r[1],s[2]=e[2]-r[2],h[0]=s[2]*Math.sin(i)+s[0]*Math.cos(i),h[1]=s[1],h[2]=s[2]*Math.cos(i)-s[0]*Math.sin(i),t[0]=h[0]+r[0],t[1]=h[1]+r[1],t[2]=h[2]+r[2],t}function M(t,e,r,i){var s=[],h=[];return s[0]=e[0]-r[0],s[1]=e[1]-r[1],s[2]=e[2]-r[2],h[0]=s[0]*Math.cos(i)-s[1]*Math.sin(i),h[1]=s[0]*Math.sin(i)+s[1]*Math.cos(i),h[2]=s[2],t[0]=h[0]+r[0],t[1]=h[1]+r[1],t[2]=h[2]+r[2],t}function m(t,e){var r=t[0],i=t[1],s=t[2],h=e[0],n=e[1],a=e[2],u=Math.sqrt(r*r+i*i+s*s)*Math.sqrt(h*h+n*n+a*a),c=u&&o(t,e)/u;return Math.acos(Math.min(Math.max(c,-1),1))}var p=h;s()},862:function(t,e,r){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(r(661)),h=i(r(561)),n=i(r(809)),a=i(r(18)),o=i(r(434)),u=i(r(147)),c=i(r(785));class l extends s.default{constructor(t,e){super(),this.lastTime=(new Date).getTime(),this.unprocessedFrames=0,this.width=t,this.height=e,this.gl=this.getInstance("#game",this.width,this.height),this.shader=new o.default(this.gl),this.spriteSheet=new u.default(this.gl,"../../assets/png/spritesheet.png"),this.level=new n.default(this.gl,this.shader,this.spriteSheet),this.player=new a.default}run(){if(null===this.gl)throw"WebGL is not supported!";this.gl.enable(h.default.DEPTH_TEST),this.gl.depthFunc(h.default.LESS),this.gl.enable(h.default.BLEND),this.gl.blendFunc(h.default.SRC_ALPHA,h.default.ONE_MINUS_SRC_ALPHA),this.gl.colorMask(!0,!0,!0,!0),this.level.init(),super.lockMousePointer(this.gl.canvas),window.requestAnimationFrame((()=>this.tick()))}tick(){const t=(new Date).getTime();for(this.unprocessedFrames+=60*(t-this.lastTime)*1e3,this.unprocessedFrames>10&&(this.unprocessedFrames=10);this.unprocessedFrames>1;)this.player.tick(this.gl),this.unprocessedFrames--;this.render(),window.requestAnimationFrame((()=>this.tick()))}render(){this.gl.viewport(0,0,this.width,this.height),this.gl.clearColor(.2,.2,.2,1),this.gl.clear(h.default.DEPTH_BUFFER_BIT|h.default.COLOR_BUFFER_BIT);const t=this.width,e=this.height,r=2/this.gl.canvas.height,i=c.default.buildCameraMatrix(this.player.position),s=c.default.buildScreenMatrix(r),n=c.default.buildViewMatrix(t,e);this.level.render(i,s,n)}}new l(1e3,600).run()},434:function(t,e,r){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(r(561));e.default=class{constructor(t){this.gl=t,this.vertexShader=this.gl.createShader(s.default.VERTEX_SHADER),this.fragmentShader=this.gl.createShader(s.default.FRAGMENT_SHADER),this.program=this.gl.createProgram(),this.compile()}compile(){if(this.gl.shaderSource(this.vertexShader,this.getShaderCode("../src/glsl/ScreenShader.vert")),this.gl.compileShader(this.vertexShader),!this.gl.getShaderParameter(this.vertexShader,s.default.COMPILE_STATUS))throw this.gl.getShaderInfoLog(this.vertexShader);if(this.gl.shaderSource(this.fragmentShader,this.getShaderCode("../src/glsl/ScreenShader.frag")),this.gl.compileShader(this.fragmentShader),!this.gl.getShaderParameter(this.fragmentShader,s.default.COMPILE_STATUS))throw this.gl.getShaderInfoLog(this.fragmentShader);if(this.gl.attachShader(this.program,this.vertexShader),this.gl.attachShader(this.program,this.fragmentShader),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,s.default.LINK_STATUS))throw this.gl.getProgramInfoLog(this.program)}getShaderCode(t){const e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),200===e.status?e.responseText:""}}},147:function(t,e,r){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(r(561));e.default=class{constructor(t,e=null){this.texture=null,this.width=0,this.height=0,this.loaded=!1,this.gl=t,this.url=e,this.load()}load(){this.texture=this.gl.createTexture();const t=new Image;t.onload=e=>{this.gl.bindTexture(s.default.TEXTURE_2D,this.texture),this.gl.texImage2D(s.default.TEXTURE_2D,0,s.default.RGBA,s.default.RGBA,s.default.UNSIGNED_BYTE,t),this.gl.texParameteri(s.default.TEXTURE_2D,s.default.TEXTURE_MIN_FILTER,s.default.NEAREST),this.gl.texParameteri(s.default.TEXTURE_2D,s.default.TEXTURE_MAG_FILTER,s.default.NEAREST),this.width=t.width,this.height=t.height,this.loaded=!0},t.src=this.url?this.url:""}}},785:function(t,e,r){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=r(338),h=i(r(6));e.default=class{static buildCameraMatrix(t){return(new s.Matrix4).identity().translate(new s.Vector3(t.x,128,t.z)).rotateX(-45).rotateY(-45)}static buildScreenMatrix(t){return(new s.Matrix4).identity().scale(new s.Vector3(t,-t,t))}static buildViewMatrix(t,e){return h.default.makePerspectiveMatrix(140*Math.PI/180,t/e,.01,2).rotateX(.3)}}},661:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{getInstance(t,e,r){const i=document.querySelector(t);return i.width=e,i.height=r,i.getContext("webgl2")}lockMousePointer(t){document.onclick=e=>t.requestPointerLock()}}},813:function(t,e,r){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(r(427)),h=r(338);class n extends s.default{constructor(t,e,r,i,s,n,a,o,u){super(t,e),this.gl=t,this.texture=r,this.pos=i,this.w=s,this.h=n,this.uo=a,this.vo=o,this.color=u,this.colVec=new h.Vector2(this.pos.x,this.pos.z)}tick(t,e,r){super.setTexture(this.texture),super.setCamera(r,e),super.render(this.pos.clone().transformAsPoint(t),this.w,this.h,this.uo,this.vo,this.color)}}e.default=n},6:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const i=r(338);e.default=class{static range(t,e){const r=[];for(let i=t;i<=e;i++)r.push(i);return r}static isInRange(t,e){return t>=e[0]&&t<=e[1]}static randomRange(t,e){return Math.floor(Math.random()*(e-t+1)+t)}static newGuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}static makePerspectiveMatrix(t,e,r,s,h=new Array(16)){const n=Math.tan(.5*Math.PI-.5*t),a=1/(r-s);return h[0]=n/e,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=n,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=(r+s)*a,h[11]=-1,h[12]=0,h[13]=0,h[14]=r*s*a*2,h[15]=0,new i.Matrix4(h)}}},561:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r extends WebGL2RenderingContext{static createVertexBuffer(t,e,i){const s=t.createBuffer();t.bindBuffer(r.ARRAY_BUFFER,s),t.bufferData(r.ARRAY_BUFFER,e,r.DYNAMIC_DRAW),t.vertexAttribPointer(i,3,r.FLOAT,!1,0,0)}static createIndexBuffer(t,e){const i=t.createBuffer();t.bindBuffer(r.ELEMENT_ARRAY_BUFFER,i),t.bufferData(r.ELEMENT_ARRAY_BUFFER,e,r.DYNAMIC_DRAW),t.bindBuffer(r.ELEMENT_ARRAY_BUFFER,i)}static initShaderProgram(t,e,r){t.useProgram(e),t.enableVertexAttribArray(r)}}e.default=r},427:function(t,e,r){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=r(338),h=i(r(561)),n=i(r(576));class a extends n.default{constructor(t,e){super(t,e),this.radius=8}render(t,e,r,i,n,a){if(!this.texture.loaded)return;const o=this.texture.width,u=this.texture.height;this.objectMatrix.identity(),this.objectMatrix.translate(new s.Vector3([t.x-e/2,t.y-1*r,t.z])),this.objectMatrix.scale(new s.Vector3(e,r,0)),this.gl.uniformMatrix4fv(this.objectTransformLocation,!1,this.objectMatrix.elements),this.textureMatrix.identity(),this.textureMatrix.scale(new s.Vector3(1/o,1/u,0)),this.textureMatrix.translate(new s.Vector3(i+.05,n+.05,0)),this.textureMatrix.scale(new s.Vector3(e-.1,e-.1,0)),this.gl.uniformMatrix4fv(this.textureTransformLocation,!1,this.textureMatrix.elements),this.gl.uniform4fv(this.colorLocation,a.elements),this.gl.drawElements(h.default.TRIANGLES,6,h.default.UNSIGNED_SHORT,0)}}e.default=a},809:function(t,e,r){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(r(855)),h=i(r(849)),n=i(r(6)),a=i(r(979)),o=i(r(813));class u{constructor(t,e,r){this.renderables=new Array,this.whiteColor=new h.default(.2,.2,.2,1),this.gl=t,this.shader=e,this.texture=r}init(){this.buildGround(),this.putTrees()}render(t,e,r){this.getAllRenderables().forEach((i=>i.tick(t.clone(),e.clone(),r.clone())))}buildGround(){for(let t=-u.SIZE;t<=u.SIZE;t++)for(let e=-u.SIZE;e<=u.SIZE;e++)this.addRenderable(new a.default(this.gl,this.shader,this.texture,new s.default(32*t,32*e,0),32,32,0,0,this.whiteColor))}putTrees(){for(let t=0;t<1e3;t++){const t=u.SIZE**2,e=n.default.randomRange(-t,t),r=n.default.randomRange(-t,t),i=new s.default(e,0,r),h=new o.default(this.gl,this.shader,this.texture,i,32,32,32,0,this.whiteColor);this.addRenderable(h)}}addRenderable(t){return this.renderables.push(t),t}getAllRenderables(){return this.renderables}getRenderableByUuid(t){return this.renderables.find((e=>e.uuid===t))}}e.default=u,u.SIZE=32},18:function(t,e,r){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=r(338),h=i(r(809));e.default=class{constructor(){this.position=new s.Vector3(0,8,0),this.speed=.5,this.maxJumpHeight=32}tick(t){this.mouseMove(t);const e=h.default.SIZE**2-14;this.position.z<-e&&(this.position.z=-e),this.position.z>e&&(this.position.z=e),this.position.x<-e&&(this.position.x=-e),this.position.x>e&&(this.position.x=e)}mouseMove(t){t.canvas.onmousemove=e=>{if(document.pointerLockElement===t.canvas){const t=e.clientX;e.clientY,this.position.x+=t*this.speed}}}}},576:function(t,e,r){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=r(338),h=i(r(6)),n=i(r(561)),a=i(r(147));e.default=class{constructor(t,e){this.uuid=h.default.newGuid(),this.objectMatrix=new s.Matrix4,this.textureMatrix=new s.Matrix4,this.gl=t,this.shader=e,this.posLocation=this.gl.getAttribLocation(this.shader.program,"a_pos"),this.objectTransformLocation=t.getUniformLocation(this.shader.program,"u_objectTransform"),this.cameraTransformLocation=t.getUniformLocation(this.shader.program,"u_cameraTransform"),this.viewTransformLocation=t.getUniformLocation(this.shader.program,"u_viewTransform"),this.textureTransformLocation=t.getUniformLocation(this.shader.program,"u_textureTransform"),this.colorLocation=this.gl.getUniformLocation(this.shader.program,"u_color"),this.texture=new a.default(t),n.default.createVertexBuffer(t,this.vertexArray,this.posLocation),n.default.createIndexBuffer(t,this.indexArray),n.default.initShaderProgram(t,e.program,this.posLocation)}setTexture(t){this.texture=t,this.gl.bindTexture(n.default.TEXTURE_2D,t.texture)}setCamera(t,e){this.gl.uniformMatrix4fv(this.viewTransformLocation,!1,t.elements),this.gl.uniformMatrix4fv(this.cameraTransformLocation,!1,e.elements)}render(t,e,r,i,h,a){if(!this.texture.loaded)return;const o=this.texture.width,u=this.texture.height;this.objectMatrix.identity(),this.objectMatrix.translate(t),this.objectMatrix.scale(new s.Vector3(1*e,1*r,0)),this.gl.uniformMatrix4fv(this.objectTransformLocation,!1,this.objectMatrix.elements),this.textureMatrix.identity(),this.textureMatrix.scale(new s.Vector3(1/o,1/u,0)),this.textureMatrix.translate(new s.Vector3(1*i,1*h,0)),this.textureMatrix.scale(new s.Vector3(1*e,1*r,0)),this.gl.uniformMatrix4fv(this.textureTransformLocation,!1,this.textureMatrix.elements),this.gl.uniform4fv(this.colorLocation,a.elements),this.gl.drawElements(n.default.TRIANGLES,6,n.default.UNSIGNED_SHORT,0)}get vertexArray(){const t=new Float32Array(12);return t.set([0,0,0],0),t.set([0,1,0],3),t.set([1,1,0],6),t.set([1,0,0],9),t}get indexArray(){const t=new Int16Array(6);return t.set([0,1,2,0,2,3],0),t}}},979:function(t,e,r){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(r(576)),h=r(338);class n extends s.default{constructor(t,e,r,i,s,h,n,a,o){super(t,e),this.gl=t,this.texture=r,this.pos=i,this.w=s,this.h=h,this.uo=n,this.vo=a,this.color=o}tick(t,e,r){const i=(new h.Matrix4).identity().rotateX(Math.PI/2);super.setTexture(this.texture),super.setCamera(r,e.multiplyRight(t).multiplyRight(i)),super.render(this.pos,this.w,this.h,this.uo,this.vo,this.color)}}e.default=n}},e={};function r(i){var s=e[i];if(void 0!==s)return s.exports;var h=e[i]={exports:{}};return t[i].call(h.exports,h,h.exports,r),h.exports}r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r(862)})();